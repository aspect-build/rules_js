"@generated by @aspect_rules_js//npm/private:npm_translate_lock.bzl from //:pnpm-lock.yaml"

# buildifier: disable=bzl-visibility
load("@aspect_rules_js//js:defs.bzl", _js_library = "js_library")
load("@npm__at_types_node__18.11.0__links//:defs.bzl", link_0 = "npm_link_imported_package_store", store_0 = "npm_imported_package_store")
load("@npm__at_types_semver__7.3.12__links//:defs.bzl", link_1 = "npm_link_imported_package_store", store_1 = "npm_imported_package_store")
load("@npm__debug__registry.npmjs.org_debug_4.3.4__links//:defs.bzl", link_2 = "npm_link_imported_package_store", store_2 = "npm_imported_package_store")
load("@npm__is-number__registry.npmjs.org_is-number_6.0.0__links//:defs.bzl", store_3 = "npm_imported_package_store")
load("@npm__is-odd__registry.npmjs.org_is-odd_3.0.1__links//:defs.bzl", link_4 = "npm_link_imported_package_store", store_4 = "npm_imported_package_store")
load("@npm__lru-cache__registry.npmjs.org_lru-cache_6.0.0__links//:defs.bzl", store_5 = "npm_imported_package_store")
load("@npm__ms__registry.npmjs.org_ms_2.1.2__links//:defs.bzl", store_6 = "npm_imported_package_store")
load("@npm__semver__registry.npmjs.org_semver_7.3.8__links//:defs.bzl", link_7 = "npm_link_imported_package_store", store_7 = "npm_imported_package_store")
load("@npm__yallist__registry.npmjs.org_yallist_4.0.0__links//:defs.bzl", store_8 = "npm_imported_package_store")

def npm_link_all_packages(name = "node_modules", imported_links = []):
    """Generated list of npm_link_package() target generators and first-party linked packages corresponding to the packages in //:pnpm-lock.yaml

    Args:
        name: name of catch all target to generate for all packages linked
        imported_links: optional list link functions from manually imported packages
            that were fetched with npm_import rules,

            For example,

            ```
            load("@npm//:defs.bzl", "npm_link_all_packages")
            load("@npm_meaning-of-life__links//:defs.bzl", npm_link_meaning_of_life = "npm_link_imported_package")

            npm_link_all_packages(
                name = "node_modules",
                imported_links = [
                    npm_link_meaning_of_life,
                ],
            )```
    """

    root_package = ""
    link_packages = [""]
    is_root = native.package_name() == root_package
    link = native.package_name() in link_packages
    if not is_root and not link:
        msg = "The npm_link_all_packages() macro loaded from @npm//:defs.bzl and called in bazel package '%s' may only be called in the bazel package(s) corresponding to the root package '' and packages ['']" % native.package_name()
        fail(msg)
    link_targets = []
    scope_targets = {}

    for link_fn in imported_links:
        new_link_targets, new_scope_targets = link_fn(name)
        link_targets.extend(new_link_targets)
        for _scope, _targets in new_scope_targets.items():
            scope_targets[_scope] = scope_targets[_scope] + _targets if _scope in scope_targets else _targets

    if is_root:
        store_0(name = "{}/@types/node".format(name))
        store_1(name = "{}/@types/semver".format(name))
        store_2(name = "{}/debug".format(name))
        store_3(name = "{}/is-number".format(name))
        store_4(name = "{}/is-odd".format(name))
        store_5(name = "{}/lru-cache".format(name))
        store_6(name = "{}/ms".format(name))
        store_7(name = "{}/semver".format(name))
        store_8(name = "{}/yallist".format(name))
    if link:
        if native.package_name() == "":
            link_targets.append(link_0(name = "{}/@types/node".format(name)))
            scope_targets["@types"] = scope_targets["@types"] + [link_targets[-1]] if "@types" in scope_targets else [link_targets[-1]]
            link_targets.append(link_1(name = "{}/@types/semver".format(name)))
            scope_targets["@types"] = scope_targets["@types"] + [link_targets[-1]] if "@types" in scope_targets else [link_targets[-1]]
            link_targets.append(link_2(name = "{}/debug".format(name)))
            link_targets.append(link_4(name = "{}/is-odd".format(name)))
            link_targets.append(link_7(name = "{}/semver".format(name)))

    for scope, scoped_targets in scope_targets.items():
        _js_library(
            name = "{}/{}".format(name, scope),
            srcs = scoped_targets,
            tags = ["manual"],
            visibility = ["//visibility:public"],
        )

    _js_library(
        name = name,
        srcs = link_targets,
        tags = ["manual"],
        visibility = ["//visibility:public"],
    )
